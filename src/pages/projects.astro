---
import Layout from '../layouts/Layout.astro';
import { projects } from '../data/projects';
import WorkCard from '../components/WorkCard.astro';
import ProjectCard from '../components/ProjectCard.astro';

const workItems   = projects.filter(p => p.type === 'work');
const personal    = projects.filter(p => p.type === 'personal');
const mainWork    = workItems.find(p => p.slug === 'erp-logistico') ?? workItems[0];
---
<Layout title="Projetos — Vanderlei" description="Case do trabalho e projetos pessoais.">
  <h1 class="text-2xl md:text-3xl font-semibold">Projetos</h1>

  <!-- Card Trabalho principal -->
  {mainWork && <div class="mt-6"><WorkCard work={mainWork} /></div>}

  <!-- Outros trabalhos (ex.: Infra) -->
  {workItems.length > 1 && (
    <>
      <h2 class="mt-8 text-xl font-semibold">Outras experiências</h2>
      <div class="mt-4 grid gap-4 md:grid-cols-2">
        {workItems.filter(w => w.slug !== mainWork.slug).map((w) => (
          <article class="surface p-4 glow-red border-red">
            <h3 class="text-lg font-semibold"><a href={`/projects/${w.slug}`}>{w.title}</a></h3>
            <p class="mt-1 text-sm text-neutral-300">{w.stack.join(' • ')}</p>
            <p class="mt-2 text-sm text-neutral-400">{w.summary}</p>
          </article>
        ))}
      </div>
    </>
  )}

  <!-- Projetos pessoais -->
  <h2 class="mt-8 text-xl font-semibold">Projetos pessoais</h2>
  <div class="mt-4 grid gap-4 md:grid-cols-2">
    {personal.map((p) => <ProjectCard project={p} />)}
  </div>
</Layout>
